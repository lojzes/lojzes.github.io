import{_ as p,X as e,Y as o,Z as n,a1 as a,$ as t,a2 as i,C as c}from"./framework-0b23a550.js";const r="/assets/db-be622ef6.png",l={},u={class:"hint-container tip"},d=n("p",{class:"hint-container-title"},"参考",-1),k={href:"https://github.com/lojzes/middle-study/blob/master/mongodb/src/test/java/com/lojzes/middle/mongo/Test01.java",target:"_blank",rel:"noopener noreferrer"},v={href:"https://blog.csdn.net/a1120467800/article/details/109954145",target:"_blank",rel:"noopener noreferrer"},m=i(`<h2 id="下载-、解压" tabindex="-1"><a class="header-anchor" href="#下载-、解压" aria-hidden="true">#</a> 下载 、解压</h2><p>https://www.mongodb.com/try/download/community</p><h2 id="启动" tabindex="-1"><a class="header-anchor" href="#启动" aria-hidden="true">#</a> 启动</h2><p>在解压的后根文件夹，创建数据文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
/Users/lojzes/workspace/mongodb/mongodb-macos-x86_64-5.0.18/data/db

启动指定数据path

切换到bin 目录，执行以下命令

./mongod <span class="token parameter variable">--dbpath</span> <span class="token punctuation">..</span>/data/db

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置文件方式启动</p><p>在安装目录下 新建 config 文件夹，</p><p>mongodb.conf</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>storage:
   dbPath: /Users/lojzes/workspace/mongodb/mongodb-macos-x86_64-5.0.18/data/db

 启动

 ./mongod <span class="token parameter variable">-f</span> <span class="token punctuation">..</span>/config/mongod.conf

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="详细配置文件" tabindex="-1"><a class="header-anchor" href="#详细配置文件" aria-hidden="true">#</a> 详细配置文件</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#MongoDB发送所有日志输出的目标指定为文件 fThe path of the log file to vhich mongod or mongos should send all diagnostic logging information</span>
systemLog:
   destination: <span class="token function">file</span>
<span class="token comment">#mongod或mongos应向其发送所有诊断日志记录信息的日志文件的路径</span>
   path: <span class="token string">&quot;/mongodb/single/log/mongod.log&quot;</span>
<span class="token comment">#当mongos或mongod实例重新启动时，mongos或mongod会将新条目附加到现有日志文件的末尾。</span>
   logAppend: <span class="token boolean">true</span>
storage:
  <span class="token comment">#mongod实例存储其数据的目录。storage.dbPath设置仅适用于mongod。##The directory where the mongod instance stores its data,Default Value is &quot;/data/dh&quot;</span>
  dbPath: <span class="token string">&quot;/mongodb/sinale/data/db&quot;</span>
  journal:
  <span class="token comment">#启用或禁用持久性日志以确保数据文件保持有效和可恢复。</span>
    enabled: <span class="token boolean">true</span>
processManagement <span class="token builtin class-name">:</span>
  <span class="token comment">#启用在后台运行mongos或mongod进程的守护进程模式源</span>
    fork: <span class="token boolean">true</span>
net:
  <span class="token comment">#服务实例绑定的IP，默认是localhost</span>
  bindip: localhost , <span class="token number">192.168</span>.0.2
   <span class="token comment">#bindip##绑定的端口，默认是27017</span>
  port: <span class="token number">27017</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="gui" tabindex="-1"><a class="header-anchor" href="#gui" aria-hidden="true">#</a> GUI</h2><p>https://www.mongodb.com/try/download/compass</p><h2 id="链接客户端" tabindex="-1"><a class="header-anchor" href="#链接客户端" aria-hidden="true">#</a> 链接客户端</h2><p>执行</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./mongo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="选择和创建数据库" tabindex="-1"><a class="header-anchor" href="#选择和创建数据库" aria-hidden="true">#</a> 选择和创建数据库</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
use persons

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令" aria-hidden="true">#</a> 常用命令</h2><h3 id="show-dbs" tabindex="-1"><a class="header-anchor" href="#show-dbs" aria-hidden="true">#</a> show dbs</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
<span class="token operator">&gt;</span> show dbs
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
<span class="token operator">&gt;</span> show databases
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除数据" tabindex="-1"><a class="header-anchor" href="#删除数据" aria-hidden="true">#</a> 删除数据</h3><p>在当前库上执行</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>db.dropDatabase()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="创建collection" tabindex="-1"><a class="header-anchor" href="#创建collection" aria-hidden="true">#</a> 创建collection</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>db.createCollection<span class="token punctuation">(</span><span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="删除集合" tabindex="-1"><a class="header-anchor" href="#删除集合" aria-hidden="true">#</a> 删除集合</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.person.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建文档" tabindex="-1"><a class="header-anchor" href="#创建文档" aria-hidden="true">#</a> 创建文档</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>db.person.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;id&quot;</span>:1,<span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;张三&quot;</span>,<span class="token string">&quot;address&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;北京昌平&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="查询文档" tabindex="-1"><a class="header-anchor" href="#查询文档" aria-hidden="true">#</a> 查询文档</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>db.person.find<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="插入多个-insermany" tabindex="-1"><a class="header-anchor" href="#插入多个-insermany" aria-hidden="true">#</a> 插入多个 inserMany</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>db.person.insertMany<span class="token punctuation">(</span>
    <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token string">&quot;userId&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1001&quot;</span>,
            <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;张四&quot;</span>,
            <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token number">30</span>,
            <span class="token string">&quot;address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;北京朝阳&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
             <span class="token string">&quot;userId&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1002&quot;</span>,
            <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;王五&quot;</span>,
            <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token number">35</span>,
            <span class="token string">&quot;address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;北京大兴&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
             <span class="token string">&quot;userId&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1003&quot;</span>,
            <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;李四&quot;</span>,
            <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token number">40</span>,
            <span class="token string">&quot;address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;北京海淀&quot;</span>
        <span class="token punctuation">}</span>,
				<span class="token punctuation">{</span>
             <span class="token string">&quot;userId&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;1004&quot;</span>,
            <span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;赵六&quot;</span>,
            <span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span> <span class="token number">40</span>,
            <span class="token string">&quot;address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;北京海淀&quot;</span>
        <span class="token punctuation">}</span>,
    <span class="token punctuation">]</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询单条" tabindex="-1"><a class="header-anchor" href="#查询单条" aria-hidden="true">#</a> 查询单条</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="显示字段控制" tabindex="-1"><a class="header-anchor" href="#显示字段控制" aria-hidden="true">#</a> 显示字段控制</h3><p>只显示 name 字段 和 _id</p><p>如果也把 _id 也隐藏，</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 隐藏 _id 字段</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;id&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="更新" tabindex="-1"><a class="header-anchor" href="#更新" aria-hidden="true">#</a> 更新</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>
<span class="token comment">//  跟新name=李四 的age 为 46</span>
<span class="token comment">// 覆盖更新，其他字段会丢失</span>
<span class="token comment">// 默认只修改一条</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">46</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 局部修改 $set 会保留相关字段</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 修改多条</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token string">&quot;1002&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">47</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">multi</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="列值增长修改" tabindex="-1"><a class="header-anchor" href="#列值增长修改" aria-hidden="true">#</a> 列值增长修改</h3><p><code>$inc</code> 每次增长为1</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token string">&quot;1001&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$inc</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 也支持多条更新</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token string">&quot;1002&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$inc</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">multi</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="删除文档" tabindex="-1"><a class="header-anchor" href="#删除文档" aria-hidden="true">#</a> 删除文档</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token string">&quot;1001&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 删除所有</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="统计文档数-count" tabindex="-1"><a class="header-anchor" href="#统计文档数-count" aria-hidden="true">#</a> 统计文档数 count</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// </span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token string">&quot;1001&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="限制条数查询" tabindex="-1"><a class="header-anchor" href="#限制条数查询" aria-hidden="true">#</a> 限制条数查询</h2><p>limit 只查询2条</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="跳数查询-skip" tabindex="-1"><a class="header-anchor" href="#跳数查询-skip" aria-hidden="true">#</a> 跳数查询 skip</h2><p><code>skip(2)</code> 跳过前2条</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="sort" tabindex="-1"><a class="header-anchor" href="#sort" aria-hidden="true">#</a> sort</h2><p>1 为升序 -1 为降序</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="复杂正则查询" tabindex="-1"><a class="header-anchor" href="#复杂正则查询" aria-hidden="true">#</a> 复杂正则查询</h2><p>包含 <code>海淀</code> 的都会匹配</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">address</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">海淀</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="比较查询" tabindex="-1"><a class="header-anchor" href="#比较查询" aria-hidden="true">#</a> 比较查询</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$lt</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gte</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$lte</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$ne</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="in-查询" tabindex="-1"><a class="header-anchor" href="#in-查询" aria-hidden="true">#</a> in 查询</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span>$<span class="token keyword">in</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="关系连接" tabindex="-1"><a class="header-anchor" href="#关系连接" aria-hidden="true">#</a> 关系连接</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$and</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;张四&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$or</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;张四&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token function">NumberInt</span><span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看当前数据库" tabindex="-1"><a class="header-anchor" href="#查看当前数据库" aria-hidden="true">#</a> 查看当前数据库</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>db
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="默认的3个库" tabindex="-1"><a class="header-anchor" href="#默认的3个库" aria-hidden="true">#</a> 默认的3个库</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token operator">&gt;</span> show databases
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+r+`" alt="" loading="lazy"></p><h2 id="索引" tabindex="-1"><a class="header-anchor" href="#索引" aria-hidden="true">#</a> 索引</h2><p>查看文档索引</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">getIndexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span> 
  <span class="token punctuation">{</span> <span class="token string-property property">&quot;v&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>  <span class="token comment">// 索引版本</span>
    <span class="token string-property property">&quot;key&quot;</span> <span class="token operator">:</span> 
      <span class="token punctuation">{</span> <span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 索引字段及排序 1 升序 -1 降序</span>
       <span class="token string-property property">&quot;name&quot;</span> <span class="token operator">:</span><span class="token string">&quot;_id_&quot;</span>  <span class="token comment">// 索引名称</span>
   <span class="token punctuation">}</span> 
<span class="token punctuation">]</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建索引" tabindex="-1"><a class="header-anchor" href="#创建索引" aria-hidden="true">#</a> 创建索引</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&gt;</span> db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">getIndexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token string-property property">&quot;v&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;key&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;_id&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;_id_&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token string-property property">&quot;v&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;key&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;name_1&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token string-property property">&quot;v&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;key&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;age&quot;</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;name_1_age_-1&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="删除索引" tabindex="-1"><a class="header-anchor" href="#删除索引" aria-hidden="true">#</a> 删除索引</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//  通过索引名称修改</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token string">&quot;name_1_age_-1&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 通过创建时的规则</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 删除所有索引</span>
db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">dropIndexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="执行计划" tabindex="-1"><a class="header-anchor" href="#执行计划" aria-hidden="true">#</a> 执行计划</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token string">&quot;1001&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">explain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token string-property property">&quot;explainVersion&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;queryPlanner&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;namespace&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;persons.person&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;indexFilterSet&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;parsedQuery&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;userId&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;$eq&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1001&quot;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;queryHash&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;B1777DBA&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;planCacheKey&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;E6E84843&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;maxIndexedOrSolutionsReached&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;maxIndexedAndSolutionsReached&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;maxScansToExplodeReached&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;winningPlan&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;stage&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;COLLSCAN&quot;</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;userId&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">&quot;$eq&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1001&quot;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;direction&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;forward&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;rejectedPlans&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;find&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;person&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;userId&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1001&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;$db&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;persons&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;serverInfo&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;host&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;MacBook-Pro.local&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;port&quot;</span> <span class="token operator">:</span> <span class="token number">27017</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5.0.18&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;gitVersion&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;796abe56bfdbca6968ff570311bf72d93632825b&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;serverParameters&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;internalQueryFacetBufferSizeBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalQueryFacetMaxOutputDocSizeBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalLookupStageIntermediateDocumentMaxSizeBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalDocumentSourceGroupMaxMemoryBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalQueryMaxBlockingSortMemoryUsageBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalQueryProhibitBlockingMergeOnMongoS&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalQueryMaxAddToSetBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalDocumentSourceSetWindowFieldsMaxMemoryBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;ok&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>userId 加索引后</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&gt;</span> db<span class="token punctuation">.</span>person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">userId</span><span class="token operator">:</span><span class="token string">&quot;1001&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">explain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token string-property property">&quot;explainVersion&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;queryPlanner&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;namespace&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;persons.person&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;indexFilterSet&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;parsedQuery&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;userId&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;$eq&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1001&quot;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;queryHash&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;B1777DBA&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;planCacheKey&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;A6C2ADF9&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;maxIndexedOrSolutionsReached&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;maxIndexedAndSolutionsReached&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;maxScansToExplodeReached&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;winningPlan&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;stage&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;FETCH&quot;</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;inputStage&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;stage&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;IXSCAN&quot;</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;keyPattern&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">&quot;userId&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;indexName&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;userId_1&quot;</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;isMultiKey&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;multiKeyPaths&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">&quot;userId&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;isUnique&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;isSparse&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;isPartial&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;indexVersion&quot;</span> <span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;direction&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;forward&quot;</span><span class="token punctuation">,</span>
				<span class="token string-property property">&quot;indexBounds&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
					<span class="token string-property property">&quot;userId&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
						<span class="token string">&quot;[\\&quot;1001\\&quot;, \\&quot;1001\\&quot;]&quot;</span>
					<span class="token punctuation">]</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;rejectedPlans&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;command&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;find&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;person&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;filter&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;userId&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;1001&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;$db&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;persons&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;serverInfo&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;host&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;MacBook-Pro.local&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;port&quot;</span> <span class="token operator">:</span> <span class="token number">27017</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;version&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;5.0.18&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;gitVersion&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;796abe56bfdbca6968ff570311bf72d93632825b&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;serverParameters&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token string-property property">&quot;internalQueryFacetBufferSizeBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalQueryFacetMaxOutputDocSizeBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalLookupStageIntermediateDocumentMaxSizeBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalDocumentSourceGroupMaxMemoryBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalQueryMaxBlockingSortMemoryUsageBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalQueryProhibitBlockingMergeOnMongoS&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalQueryMaxAddToSetBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;internalDocumentSourceSetWindowFieldsMaxMemoryBytes&quot;</span> <span class="token operator">:</span> <span class="token number">104857600</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;ok&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,83);function b(g,q){const s=c("ExternalLinkIcon");return e(),o("div",null,[n("div",u,[d,n("p",null,[n("a",k,[a("https://github.com/lojzes/middle-study/blob/master/mongodb/src/test/java/com/lojzes/middle/mongo/Test01.java"),t(s)])]),n("p",null,[n("a",v,[a("https://blog.csdn.net/a1120467800/article/details/109954145"),t(s)])])]),m])}const h=p(l,[["render",b],["__file","基础.html.vue"]]);export{h as default};
